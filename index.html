<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSO Job List</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Open Source Objects Job List</h1>
    <p>This is a table of all the jobs currently stored in the CSV file of the bot hosted on DigitalOcean.</p>

    <table id="jobTable">
        <tr>
            <th>Scene ID</th>
            <th>Description</th>
            <th>Attachments</th>
            <th>Attributes</th>
            <th>Required roles</th>
            <th>Deadline</th>
            <th>Status</th>
            <th>Assignee</th>
            <th>Work</th>
        </tr>
    </table>

    <script>
    async function fetchJobs() {
        const API_URL = "http://24.199.109.12:3000/jobs"; // Replace with your actual API URL

        try {
            const response = await fetch(API_URL);
            const jobs = await response.json();
            console.log(jobs); // Debugging

            const table = document.getElementById("jobTable");

            jobs.forEach(job => {
                const row = document.createElement("tr");

                row.innerHTML = `
                    <td>${job["Scene ID"] || "N/A"}</td>
                    <td>${job.Description || "N/A"}</td>
                    <td>${job.Attachments || "N/A"}</td>
                    <td>${job.Attributes || "N/A"}</td>
                    <td>${job["Required roles"] || "N/A"}</td>
                    <td>${job.Deadline || "N/A"}</td>
                    <td>${job.Status || "N/A"}</td>
                    <td>${job.Assignee || "N/A"}</td>
                    <td>${job.Work || "N/A"}</td>
                `;

                table.appendChild(row);
            });
        } catch (error) {
            console.error("Error fetching job data:", error);
        }
    }

    window.onload = fetchJobs;
    </script>
</body>
</html>
